<form class="border border-dark rounded col-6 m-3 p-3" [formGroup]="formGroup" #formAddUser="ngForm"
    (ngSubmit)="addUser()">
    <div class="form-row mb-3">

        <div class="form-group col">
            <label for="fullName">Full Name</label>
            <input type="text" formControlName="fullName" class="form-control" id="fullName" placeholder="Full Name"
                name="fullName" [ngClass]="{'is-invalid':(fullName?.touched||fullName?.dirty)&&fullName?.invalid}">
        </div>

        <div class="form-group col">
            <label for="email">Email</label>
            <input type="text" formControlName="email" class="form-control" id="email" placeholder="Email" name="email"
                [ngClass]="{'is-invalid': (email?.touched||email?.dirty)&&email?.invalid}">
        </div>

        <div class="form-group col">
            <label for="password">Password</label>
            <input type="password" formControlName="password" class="form-control" id="password" placeholder="Password"
                name="password" [ngClass]="{'is-invalid': (password?.touched||password?.dirty)&&password?.invalid}">
        </div>

        <!-- @if ($index == 0) { }-->
        <!-- <div class="form-group col" formArrayName="mobileNumber">
            @for (control of mobileNumber.controls; track $index) {
                <div [formGroupName]="$index">
                    <label for="mobileNumber">Mobile Number</label>
                    <input type="number" formControlName="phone" class="form-control" id="mobileNumber"
                    placeholder="Mobile Number" name="mobileNumber" [ngClass]="{'is-invalid': (mobileNumber.touched||mobileNumber.dirty)&&mobileNumber.invalid}">
                    <button class="btn btn-danger" (click)="removeMobile($index)">Remove</button> 
                </div>
            }
            <button class="btn btn-primary" (click)="addMobile()">Add Mobile Number</button>
        </div> -->

        <div class="form-group col" formArrayName="mobileNumber">

            @for (control of mobileNumber.controls; track $index) {
            <div [formGroupName]="$index">

                @if ($index == 0) {
                <label for="mobileNumber">Mobile Number</label>
                <input type="number" formControlName="phone" class="form-control" id="mobileNumber"
                    placeholder="Mobile Number" name="mobileNumber"
                    [ngClass]="{'is-invalid': (mobileNumber.touched||mobileNumber.dirty)&&mobileNumber.invalid}">
                }

                @else {
                <label for="mobileNumber">Mobile Number</label>
                <input type="number" formControlName="phone" class="form-control" id="mobileNumber"
                    placeholder="Mobile Number" name="mobileNumber"
                    [ngClass]="{'is-invalid': (mobileNumber.touched||mobileNumber.dirty)&&mobileNumber.invalid}">
                <button class="btn btn-danger" (click)="removeMobile($index)">Remove</button>
                }

            </div>
            }
            <button class="btn btn-primary" (click)="addMobile()">Add Mobile Number</button>
        </div>

        <!-- <div class="form-group col" formArrayName="address">

            <label for="city">City:</label>
            <input type="text" formControlName="city" class="form-control" id="city" placeholder="City" name="city">

            <label for="street">Street:</label>
            <input type="text" formControlName="street" class="form-control" id="street" placeholder="Street"
                name="street">

            <button class="btn btn-primary" (click)="addAddress()">Add Address</button>

            @for (control of address.controls; track $index) {

            <div [formGroupName]="$index">

                <label for="city">Another City:</label>
                <input type="text" formControlName="city" class="form-control" id="city" placeholder="City" name="city">

                <label for="street">Another Street:</label>
                <input type="text" formControlName="street" class="form-control" id="street" placeholder="Street"
                    name="street">
                <button class="btn btn-danger" (click)="removeAddress($index)">Remove</button>
            </div>
            }
        </div> -->

        <div class="form-group col" formArrayName="address">
            @for (control of address.controls; track $index) {
            <div [formGroupName]="$index">

                @if ($index == 0) {
                <label for="city">City:</label>
                <input type="text" formControlName="city" class="form-control" id="city" placeholder="City" name="city"
                    [ngClass]="{'is-invalid': (address.touched||address.dirty)&&address.invalid}">

                <label for="street">Street:</label>
                <input type="text" formControlName="street" class="form-control" id="street" placeholder="Street"
                    name="street" [ngClass]="{'is-invalid': (address.touched||address.dirty)&&address.invalid}">
                }

                @else {
                <label for="city">City:</label>
                <input type="text" formControlName="city" class="form-control" id="city" placeholder="City" name="city"
                    [ngClass]="{'is-invalid': (address.touched||address.dirty)&&address.invalid}">

                <label for="street">Street:</label>
                <input type="text" formControlName="street" class="form-control" id="street" placeholder="Street"
                    name="street" [ngClass]="{'is-invalid': (address.touched||address.dirty)&&address.invalid}">

                <button class="btn btn-danger" (click)="removeAddress($index)">Remove</button>
                }

            </div>
            }
            <button class="btn btn-primary" (click)="addAddress()">Add Address</button>

        </div>

    </div>

    <!-- <button type="submit" class="btn btn-primary">Add User</button> -->
    <button type="submit" class="btn btn-primary" [disabled]="formAddUser.invalid">Add User</button>
</form>